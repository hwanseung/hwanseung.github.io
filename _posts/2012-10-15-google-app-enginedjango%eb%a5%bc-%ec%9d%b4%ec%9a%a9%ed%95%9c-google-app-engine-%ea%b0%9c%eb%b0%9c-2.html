---
layout: post
title: "[Google App Engine]Django를 이용한 Google App Engine 개발 -2-"
date: 2012-10-15 11:16:33.000000000 +09:00
type: post
published: true
status: publish
categories:
- Programing/Web
tags:
- Django
- Google App Engine
- python
- 파이썬
meta:
  _edit_last: '1'
author: Hwanseung Lee
---
<p style="background-color: transparent;"><img class="aligncenter" src="{{ site.baseurl }}/assets/cfile7.uf.207F3A4F507581C33BC9E6.jpg" alt="" width="500" height="250" /><b style="color: #2d2c2d; font-family: gulim; background-color: #ffffff;"><span style="font-size: 11pt;"><span style="font-size: 14pt;">1. 시작하기 전에...</span></span></b></p>
<p style="background-color: transparent;"><span style="font-size: 9pt; background-color: #ffffff; color: #2d2c2d; font-family: gulim;"> 이번 포스팅은 </span><a style="font-size: 9pt; background-color: #ffffff; font-family: gulim; color: #3649ae; text-decoration: none;" title="[http://rucifer.tistory.com/432]로 이동합니다." href="http://rucifer.tistory.com/433" target="_blank">Django를 이용한 Google App Engine 개발 -1-</a><span style="font-size: 9pt; background-color: #ffffff; color: #2d2c2d; font-family: gulim;">를 이어 이야기를 진행하도록 하겠습니다.</span></p>
<p style="background-color: transparent;"><span style="background-color: #ffffff; color: #2d2c2d; font-family: gulim;"> 저번 포스팅에는 Google App Engine에서 Django가 구동되는것 까지만 확인까지 하였는데 그 뒤에 개발에 실직적으로 필요한 부분을 다루도록 하겠습니다.</span></p>
<p style="background-color: transparent;"><b style="color: #2d2c2d; font-family: gulim; background-color: #ffffff;"><span style="font-size: 11pt;"><span style="font-size: 14pt;">2. Django MVT 흐름 이해하기</span></span></b></p>
<p style="background-color: transparent;"><span style="font-size: 9pt; background-color: #ffffff; color: #2d2c2d; font-family: gulim;"> 보통 웹 프레임워크에서는 MVC 패턴(Model-View-Controller)이라 하는데 Django는 MVT(Model-View-Template)라고 합니다. Django에서 View를 MVC패턴에서의 Controller 역활을 그리고 Template은</span><span style="background-color: #ffffff; color: #2d2c2d; font-family: gulim;"> </span><span style="background-color: #ffffff; color: #2d2c2d; font-family: gulim;">MVC패턴에서의 View 역활을 합니다.</span></p>
<p style="background-color: transparent;"><span style="background-color: #ffffff; color: #2d2c2d; font-family: gulim; font-size: 9pt;"> 말 장난 같아 보이는데 똑같은 역활을 하는게 이름이 다를 뿐이라고 생각을 하시면 됩니다.^^ </span><span style="background-color: #ffffff; color: #2d2c2d; font-family: gulim; font-size: 9pt;">인제 본격적으로 흐름에 대해서 알아보겠습니다. </span><span style="background-color: #ffffff; color: #2d2c2d; font-family: gulim; font-size: 9pt;">  </span></p>
<p style="background-color: transparent;"><span style="background-color: #ffffff; font-family: gulim; font-size: 9pt;"><span style="color: #2d2c2d;"> 클라이언트(사용자)에서 웹서버 쪽으로 요청이 들어오면 요청된 URL으로 제어가 됩니다 그 부분은 </span><b><span style="color: #5fb636;">urls.py</span></b><span style="color: #2d2c2d;">에 정의할 수 있습니다.</span></span></p>
<pre style="font-size: medium; background-color: #e0ffb8; border-style: solid; border-color: #94da3a; border-width: 1px 0px; padding: 0.3em 0.4em; overflow: auto; color: #000000; line-height: 16.78333282470703px;"><span class="kn" style="margin-left: 0px; margin-right: 0px;">from</span> <span class="nn" style="color: #555555; margin-left: 0px; margin-right: 0px;">django.conf.urls</span> <span class="kn" style="margin-left: 0px; margin-right: 0px;">import</span> <span class="n" style="margin-left: 0px; margin-right: 0px;">patterns</span><span class="p" style="margin-left: 0px; margin-right: 0px;">,</span> <span class="n" style="margin-left: 0px; margin-right: 0px;">url</span><span class="p" style="margin-left: 0px; margin-right: 0px;">,</span> <span class="n" style="margin-left: 0px; margin-right: 0px;">include</span>

<span class="n" style="margin-left: 0px; margin-right: 0px;">urlpatterns</span> <span class="o" style="font-weight: bold; margin-left: 0px; margin-right: 0px;">=</span> <span class="n" style="margin-left: 0px; margin-right: 0px;">patterns</span><span class="p" style="margin-left: 0px; margin-right: 0px;">(</span><span class="s" style="color: #bb8844; margin-left: 0px; margin-right: 0px;">''</span><span class="p" style="margin-left: 0px; margin-right: 0px;">,</span>
    <span class="p" style="margin-left: 0px; margin-right: 0px;">(</span><span class="s" style="color: #bb8844; margin-left: 0px; margin-right: 0px;">r'^articles/2003/$'</span><span class="p" style="margin-left: 0px; margin-right: 0px;">,</span> <span class="s" style="color: #bb8844; margin-left: 0px; margin-right: 0px;">'news.views.special_case_2003'</span><span class="p" style="margin-left: 0px; margin-right: 0px;">),</span>
    <span class="p" style="margin-left: 0px; margin-right: 0px;">(</span><span class="s" style="color: #bb8844; margin-left: 0px; margin-right: 0px;">r'^articles/(\d{4})/$'</span><span class="p" style="margin-left: 0px; margin-right: 0px;">,</span> <span class="s" style="color: #bb8844; margin-left: 0px; margin-right: 0px;">'news.views.year_archive'</span><span class="p" style="margin-left: 0px; margin-right: 0px;">),</span>
    <span class="p" style="margin-left: 0px; margin-right: 0px;">(</span><span class="s" style="color: #bb8844; margin-left: 0px; margin-right: 0px;">r'^articles/(\d{4})/(\d{2})/$'</span><span class="p" style="margin-left: 0px; margin-right: 0px;">,</span> <span class="s" style="color: #bb8844; margin-left: 0px; margin-right: 0px;">'news.views.month_archive'</span><span class="p" style="margin-left: 0px; margin-right: 0px;">),</span>
    <span class="p" style="margin-left: 0px; margin-right: 0px;">(</span><span class="s" style="color: #bb8844; margin-left: 0px; margin-right: 0px;">r'^articles/(\d{4})/(\d{2})/(\d+)/$'</span><span class="p" style="margin-left: 0px; margin-right: 0px;">,</span> <span class="s" style="color: #bb8844; margin-left: 0px; margin-right: 0px;">'news.views.article_detail'</span><span class="p" style="margin-left: 0px; margin-right: 0px;">),</span>
<span class="p" style="margin-left: 0px; margin-right: 0px;">)</span></pre>
<p style="background-color: transparent;"><span style="color: #000000; font-size: 9pt; line-height: 16.78333282470703px;"> 위의 내용은 urls.py의 예제입니다.</span></p>
<p style="background-color: transparent;"> 정규표현식으로  url를 걸러 널러 낼수 있으며 정규표현식에 적합한 요청은 다음의 view(MVC패턴에서 Controller 역활)로 넘어 가게 됩니다. django같은 경우 <span style="background-color: #ffffff; color: #2d2c2d; font-family: gulim;">Elegant URL design이라 불리우는 URL를 줄여주는 기능이 있습니다. GET 요청의 파라미터 역활 대신에 정규표현식을 통해 URL PATH에서 특정 요청정보를 가져 올 수 있습니다.  </span></p>
<p style="background-color: transparent;">  <span class="p" style="color: #000000; font-size: medium; line-height: 16.78333282470703px; margin-left: 0px; margin-right: 0px;">(</span><span class="s" style="font-size: medium; line-height: 16.78333282470703px; color: #bb8844; margin-left: 0px; margin-right: 0px;">r'^articles/(?P&lt;year&gt;\d{4})/$'</span><span class="p" style="color: #000000; font-size: medium; line-height: 16.78333282470703px; margin-left: 0px; margin-right: 0px;">,</span> <span class="s" style="font-size: medium; line-height: 16.78333282470703px; color: #bb8844; margin-left: 0px; margin-right: 0px;">'news.views.year_archive'</span><span class="p" style="color: #000000; font-size: medium; line-height: 16.78333282470703px; margin-left: 0px; margin-right: 0px;">)</span></p>
<p><span style="background-color: #ffffff; color: #2d2c2d; font-family: gulim;">를 예를 들자면 이 있습니다. </span><span style="background-color: transparent; color: #bb8844; font-size: medium; line-height: 16.766666412353516px;">^articles/(?P&lt;year&gt;\d{4})/$</span><span style="background-color: #ffffff; color: #2d2c2d; font-family: gulim;">에 해당되는 PATH가 요청이 되면</span><span style="background-color: #ffffff;"><span style="color: #2d2c2d; font-family: gulim;"> </span><span style="color: #bb8844; font-size: medium; line-height: 16.78333282470703px;">news.views.year_archive</span></span><span style="background-color: #ffffff; color: #2d2c2d; font-family: gulim;">뷰로 넘어가게 됩니다. 이때 year의 변수에 4자리 수의 수가 같이 넘겨 줄 수 있습니다. 넘어오는 변수를 잘 사용하여 동적인 페이지를 만들 수 있습니다.</span></p>
<p><span style="background-color: #ffffff; color: #2d2c2d; font-family: gulim;"> </span></p>
<p><span style="color: #2d2c2d; font-family: gulim;"> 인제 Controller 역활을 하는 View를 살펴보겠습니다.</span></p>
<div class="highlight-python" style="margin-left: 0px; margin-right: 0px; color: #000000; font-family: Verdana, sans-serif; line-height: 16.78333282470703px; background-color: #ffffff;">
<div class="highlight" style="margin-left: 0px; margin-right: 0px;">
<pre style="font-size: medium; background-color: #e0ffb8; border-style: solid; border-color: #94da3a; border-width: 1px 0px; padding: 0.3em 0.4em; overflow: auto;"><span class="kn" style="margin-left: 0px; margin-right: 0px;">from</span> <span class="nn" style="color: #555555; margin-left: 0px; margin-right: 0px;">django.http</span> <span class="kn" style="margin-left: 0px; margin-right: 0px;">import</span> <span class="n" style="margin-left: 0px; margin-right: 0px;">HttpResponse</span>
<span class="kn" style="margin-left: 0px; margin-right: 0px;">import</span> <span class="nn" style="color: #555555; margin-left: 0px; margin-right: 0px;">datetime</span>

<span class="k" style="font-weight: bold; margin-left: 0px; margin-right: 0px;">def</span> <span class="nf" style="color: #990000; font-weight: bold; margin-left: 0px; margin-right: 0px;">current_datetime</span><span class="p" style="margin-left: 0px; margin-right: 0px;">(</span><span class="n" style="margin-left: 0px; margin-right: 0px;">request</span><span class="p" style="margin-left: 0px; margin-right: 0px;">):</span>
    <span class="n" style="margin-left: 0px; margin-right: 0px;">now</span> <span class="o" style="font-weight: bold; margin-left: 0px; margin-right: 0px;">=</span> <span class="n" style="margin-left: 0px; margin-right: 0px;">datetime</span><span class="o" style="font-weight: bold; margin-left: 0px; margin-right: 0px;">.</span><span class="n" style="margin-left: 0px; margin-right: 0px;">datetime</span><span class="o" style="font-weight: bold; margin-left: 0px; margin-right: 0px;">.</span><span class="n" style="margin-left: 0px; margin-right: 0px;">now</span><span class="p" style="margin-left: 0px; margin-right: 0px;">()</span>
    <span class="n" style="margin-left: 0px; margin-right: 0px;">html</span> <span class="o" style="font-weight: bold; margin-left: 0px; margin-right: 0px;">=</span> <span class="s" style="color: #bb8844; margin-left: 0px; margin-right: 0px;">"&lt;html&gt;&lt;body&gt;It is now </span><span class="si" style="color: #bb8844; margin-left: 0px; margin-right: 0px;">%s</span><span class="s" style="color: #bb8844; margin-left: 0px; margin-right: 0px;">.&lt;/body&gt;&lt;/html&gt;"</span> <span class="o" style="font-weight: bold; margin-left: 0px; margin-right: 0px;">%</span> <span class="n" style="margin-left: 0px; margin-right: 0px;">now</span>
    <span class="k" style="font-weight: bold; margin-left: 0px; margin-right: 0px;">return</span> <span class="n" style="margin-left: 0px; margin-right: 0px;">HttpResponse</span><span class="p" style="margin-left: 0px; margin-right: 0px;">(</span><span class="n" style="margin-left: 0px; margin-right: 0px;">html</span><span class="p" style="margin-left: 0px; margin-right: 0px;">)</span>
</pre>
<div><span class="p" style="margin-left: 0px; margin-right: 0px;"> </span></div>
</div>
</div>
<p><span style="color: #2d2c2d; font-family: gulim;"> 위의 코드는 심플한 View의 코드소스입니다. 이 코드는 Template를 쓰지 않고 파이썬 코드 상에서 HTML코드를 생성합니다.</span></p>
<p><span style="color: #2d2c2d; font-family: gulim;">리턴타입이 HttpResponse입니다. 이 서브 클래스가 다양하게 존재하는데 리다이렉트를 할 경우나 여러 상황에 맞게 사용할 수 있습니다.</span></p>
<p><span style="color: #2d2c2d; font-family: gulim;"> </span></p>
<p><span style="color: #2d2c2d; font-family: gulim;">다음은 Template에 대해 알아 보겠습니다.</span></p>
<pre style="font-size: medium; background-color: #e0ffb8; border-style: solid; border-color: #94da3a; border-width: 1px 0px; padding: 0.3em 0.4em; overflow: auto; color: #000000; line-height: 16.78333282470703px;"><span class="gp" style="color: #555555; margin-left: 0px; margin-right: 0px;">&gt;&gt;&gt; </span><span class="kn" style="margin-left: 0px; margin-right: 0px;">from</span> <span class="nn" style="color: #555555; margin-left: 0px; margin-right: 0px;">django.template</span> <span class="kn" style="margin-left: 0px; margin-right: 0px;">import</span> <span class="n" style="margin-left: 0px; margin-right: 0px;">Context</span><span class="p" style="margin-left: 0px; margin-right: 0px;">,</span> <span class="n" style="margin-left: 0px; margin-right: 0px;">Template</span>
<span class="gp" style="color: #555555; margin-left: 0px; margin-right: 0px;">&gt;&gt;&gt; </span><span class="n" style="margin-left: 0px; margin-right: 0px;">t</span> <span class="o" style="font-weight: bold; margin-left: 0px; margin-right: 0px;">=</span> <span class="n" style="margin-left: 0px; margin-right: 0px;">Template</span><span class="p" style="margin-left: 0px; margin-right: 0px;">(</span><span class="s" style="color: #bb8844; margin-left: 0px; margin-right: 0px;">"My name is &#123;&#123; my_name &#125;&#125;."</span><span class="p" style="margin-left: 0px; margin-right: 0px;">)</span>

<span class="gp" style="color: #555555; margin-left: 0px; margin-right: 0px;">&gt;&gt;&gt; </span><span class="n" style="margin-left: 0px; margin-right: 0px;">c</span> <span class="o" style="font-weight: bold; margin-left: 0px; margin-right: 0px;">=</span> <span class="n" style="margin-left: 0px; margin-right: 0px;">Context</span><span class="p" style="margin-left: 0px; margin-right: 0px;">({</span><span class="s" style="color: #bb8844; margin-left: 0px; margin-right: 0px;">"my_name"</span><span class="p" style="margin-left: 0px; margin-right: 0px;">:</span> <span class="s" style="color: #bb8844; margin-left: 0px; margin-right: 0px;">"Adrian"</span><span class="p" style="margin-left: 0px; margin-right: 0px;">})</span>
<span class="gp" style="color: #555555; margin-left: 0px; margin-right: 0px;">&gt;&gt;&gt; </span><span class="n" style="margin-left: 0px; margin-right: 0px;">t</span><span class="o" style="font-weight: bold; margin-left: 0px; margin-right: 0px;">.</span><span class="n" style="margin-left: 0px; margin-right: 0px;">render</span><span class="p" style="margin-left: 0px; margin-right: 0px;">(</span><span class="n" style="margin-left: 0px; margin-right: 0px;">c</span><span class="p" style="margin-left: 0px; margin-right: 0px;">)</span>
<span class="go" style="color: #888888; margin-left: 0px; margin-right: 0px;">"My name is Adrian."</span>

<span class="gp" style="color: #555555; margin-left: 0px; margin-right: 0px;">&gt;&gt;&gt; </span><span class="n" style="margin-left: 0px; margin-right: 0px;">c</span> <span class="o" style="font-weight: bold; margin-left: 0px; margin-right: 0px;">=</span> <span class="n" style="margin-left: 0px; margin-right: 0px;">Context</span><span class="p" style="margin-left: 0px; margin-right: 0px;">({</span><span class="s" style="color: #bb8844; margin-left: 0px; margin-right: 0px;">"my_name"</span><span class="p" style="margin-left: 0px; margin-right: 0px;">:</span> <span class="s" style="color: #bb8844; margin-left: 0px; margin-right: 0px;">"Dolores"</span><span class="p" style="margin-left: 0px; margin-right: 0px;">})</span>
<span class="gp" style="color: #555555; margin-left: 0px; margin-right: 0px;">&gt;&gt;&gt; </span><span class="n" style="margin-left: 0px; margin-right: 0px;">t</span><span class="o" style="font-weight: bold; margin-left: 0px; margin-right: 0px;">.</span><span class="n" style="margin-left: 0px; margin-right: 0px;">render</span><span class="p" style="margin-left: 0px; margin-right: 0px;">(</span><span class="n" style="margin-left: 0px; margin-right: 0px;">c</span><span class="p" style="margin-left: 0px; margin-right: 0px;">)</span>
<span class="go" style="color: #888888; margin-left: 0px; margin-right: 0px;">"My name is Dolores."</span></pre>
<p><span style="color: #2d2c2d; font-family: gulim;"> 가장 기본적인 코드입니다. 문장안에 &#123;&#123; &#125;&#125;"에 들어간 변수를 값으로 치환해주는 방식입니다.</span></p>
<p><span style="color: #2d2c2d; font-family: gulim;">변수 치환뿐만 아니라 if문, for문 같은 기본적인 문법을 지원해서 변수를 살짝 제어해서 결과물을 다르게 나올게 할 수 있습니다.</span></p>
<p><span style="color: #2d2c2d; font-family: gulim;">실제 코드에서는 보통 아래와 같이 쓰입니다.</span></p>
<pre style="font-size: medium; background-color: #e0ffb8; border-style: solid; border-color: #94da3a; border-width: 1px 0px; padding: 0.3em 0.4em; overflow: auto; color: #000000; line-height: 16.78333282470703px;"><span class="k" style="font-weight: bold; margin-left: 0px; margin-right: 0px;">def</span> <span class="nf" style="color: #990000; font-weight: bold; margin-left: 0px; margin-right: 0px;">some_view</span><span class="p" style="margin-left: 0px; margin-right: 0px;">(</span><span class="n" style="margin-left: 0px; margin-right: 0px;">request</span><span class="p" style="margin-left: 0px; margin-right: 0px;">):</span>
    <span class="c" style="color: #999988; font-style: italic; margin-left: 0px; margin-right: 0px;"># ...</span>
    <span class="k" style="font-weight: bold; margin-left: 0px; margin-right: 0px;">return</span> <span class="n" style="margin-left: 0px; margin-right: 0px;">render_to_response</span><span class="p" style="margin-left: 0px; margin-right: 0px;">(</span><span class="s" style="color: #bb8844; margin-left: 0px; margin-right: 0px;">'my_template.html'</span><span class="p" style="margin-left: 0px; margin-right: 0px;">,</span>
                              <span class="n" style="margin-left: 0px; margin-right: 0px;">my_data_dictionary</span><span class="p" style="margin-left: 0px; margin-right: 0px;">)</span></pre>
<p><span style="color: #2d2c2d; font-family: gulim;"> 템플릿을 HTML파일로 만들고 넘겨줄 변수의 집합은 dictionary자료형을 두번째 인자로 render_to_response함수를 불러서 사용합니다.</span></p>
<p style="background-color: transparent;"><b style="color: #2d2c2d; font-family: gulim; background-color: #ffffff;"><span style="font-size: 11pt;"><span style="font-size: 14pt;">3. Datastore 이해하기.</span></span></b></p>
<p><span style="color: #2d2c2d; font-family: gulim;"> Datastore는 스키마가 없는 데이터베이스입니다. 즉 NoSQL입니다. </span></p>
<pre class="prettyprint" style="margin-top: 1.5em; margin-bottom: 1.5em; padding: 6px 10px; border: 1px solid #bbbbbb; font-size: 13px; font-family: 'Droid Sans Mono', monospace; vertical-align: baseline; line-height: 1.5; color: #007000; background-color: #fafafa; overflow: auto;"><span class="kwd" style="margin: 0px; padding: 0px; border: 0px; font-style: inherit; font-family: inherit; vertical-align: baseline; color: #000088;">import</span><span class="pln" style="margin: 0px; padding: 0px; border: 0px; font-style: inherit; font-family: inherit; vertical-align: baseline; color: #000000;"> datetime
</span><span class="kwd" style="margin: 0px; padding: 0px; border: 0px; font-style: inherit; font-family: inherit; vertical-align: baseline; color: #000088;">from</span><span class="pln" style="margin: 0px; padding: 0px; border: 0px; font-style: inherit; font-family: inherit; vertical-align: baseline; color: #000000;"> google</span><span class="pun" style="margin: 0px; padding: 0px; border: 0px; font-style: inherit; font-family: inherit; vertical-align: baseline; color: #666600;">.</span><span class="pln" style="margin: 0px; padding: 0px; border: 0px; font-style: inherit; font-family: inherit; vertical-align: baseline; color: #000000;">appengine</span><span class="pun" style="margin: 0px; padding: 0px; border: 0px; font-style: inherit; font-family: inherit; vertical-align: baseline; color: #666600;">.</span><span class="pln" style="margin: 0px; padding: 0px; border: 0px; font-style: inherit; font-family: inherit; vertical-align: baseline; color: #000000;">ext </span><span class="kwd" style="margin: 0px; padding: 0px; border: 0px; font-style: inherit; font-family: inherit; vertical-align: baseline; color: #000088;">import</span><span class="pln" style="margin: 0px; padding: 0px; border: 0px; font-style: inherit; font-family: inherit; vertical-align: baseline; color: #000000;"> db
</span><span class="kwd" style="margin: 0px; padding: 0px; border: 0px; font-style: inherit; font-family: inherit; vertical-align: baseline; color: #000088;">from</span><span class="pln" style="margin: 0px; padding: 0px; border: 0px; font-style: inherit; font-family: inherit; vertical-align: baseline; color: #000000;"> google</span><span class="pun" style="margin: 0px; padding: 0px; border: 0px; font-style: inherit; font-family: inherit; vertical-align: baseline; color: #666600;">.</span><span class="pln" style="margin: 0px; padding: 0px; border: 0px; font-style: inherit; font-family: inherit; vertical-align: baseline; color: #000000;">appengine</span><span class="pun" style="margin: 0px; padding: 0px; border: 0px; font-style: inherit; font-family: inherit; vertical-align: baseline; color: #666600;">.</span><span class="pln" style="margin: 0px; padding: 0px; border: 0px; font-style: inherit; font-family: inherit; vertical-align: baseline; color: #000000;">api </span><span class="kwd" style="margin: 0px; padding: 0px; border: 0px; font-style: inherit; font-family: inherit; vertical-align: baseline; color: #000088;">import</span><span class="pln" style="margin: 0px; padding: 0px; border: 0px; font-style: inherit; font-family: inherit; vertical-align: baseline; color: #000000;"> users
</span><span class="kwd" style="margin: 0px; padding: 0px; border: 0px; font-style: inherit; font-family: inherit; vertical-align: baseline; color: #000088;">class</span> <span class="typ" style="margin: 0px; padding: 0px; border: 0px; font-style: inherit; font-family: inherit; vertical-align: baseline; color: #660066;">Employee</span><span class="pun" style="margin: 0px; padding: 0px; border: 0px; font-style: inherit; font-family: inherit; vertical-align: baseline; color: #666600;">(</span><span class="pln" style="margin: 0px; padding: 0px; border: 0px; font-style: inherit; font-family: inherit; vertical-align: baseline; color: #000000;">db</span><span class="pun" style="margin: 0px; padding: 0px; border: 0px; font-style: inherit; font-family: inherit; vertical-align: baseline; color: #666600;">.</span><span class="typ" style="margin: 0px; padding: 0px; border: 0px; font-style: inherit; font-family: inherit; vertical-align: baseline; color: #660066;">Model</span><span class="pun" style="margin: 0px; padding: 0px; border: 0px; font-style: inherit; font-family: inherit; vertical-align: baseline; color: #666600;">):</span><span class="pln" style="margin: 0px; padding: 0px; border: 0px; font-style: inherit; font-family: inherit; vertical-align: baseline; color: #000000;">
  name </span><span class="pun" style="margin: 0px; padding: 0px; border: 0px; font-style: inherit; font-family: inherit; vertical-align: baseline; color: #666600;">=</span><span class="pln" style="margin: 0px; padding: 0px; border: 0px; font-style: inherit; font-family: inherit; vertical-align: baseline; color: #000000;"> db</span><span class="pun" style="margin: 0px; padding: 0px; border: 0px; font-style: inherit; font-family: inherit; vertical-align: baseline; color: #666600;">.</span><span class="typ" style="margin: 0px; padding: 0px; border: 0px; font-style: inherit; font-family: inherit; vertical-align: baseline; color: #660066;">StringProperty</span><span class="pun" style="margin: 0px; padding: 0px; border: 0px; font-style: inherit; font-family: inherit; vertical-align: baseline; color: #666600;">(</span><span class="pln" style="margin: 0px; padding: 0px; border: 0px; font-style: inherit; font-family: inherit; vertical-align: baseline; color: #000000;">required</span><span class="pun" style="margin: 0px; padding: 0px; border: 0px; font-style: inherit; font-family: inherit; vertical-align: baseline; color: #666600;">=</span><span class="kwd" style="margin: 0px; padding: 0px; border: 0px; font-style: inherit; font-family: inherit; vertical-align: baseline; color: #000088;">True</span><span class="pun" style="margin: 0px; padding: 0px; border: 0px; font-style: inherit; font-family: inherit; vertical-align: baseline; color: #666600;">)</span><span class="pln" style="margin: 0px; padding: 0px; border: 0px; font-style: inherit; font-family: inherit; vertical-align: baseline; color: #000000;">
  role </span><span class="pun" style="margin: 0px; padding: 0px; border: 0px; font-style: inherit; font-family: inherit; vertical-align: baseline; color: #666600;">=</span><span class="pln" style="margin: 0px; padding: 0px; border: 0px; font-style: inherit; font-family: inherit; vertical-align: baseline; color: #000000;"> db</span><span class="pun" style="margin: 0px; padding: 0px; border: 0px; font-style: inherit; font-family: inherit; vertical-align: baseline; color: #666600;">.</span><span class="typ" style="margin: 0px; padding: 0px; border: 0px; font-style: inherit; font-family: inherit; vertical-align: baseline; color: #660066;">StringProperty</span><span class="pun" style="margin: 0px; padding: 0px; border: 0px; font-style: inherit; font-family: inherit; vertical-align: baseline; color: #666600;">(</span><span class="pln" style="margin: 0px; padding: 0px; border: 0px; font-style: inherit; font-family: inherit; vertical-align: baseline; color: #000000;">required</span><span class="pun" style="margin: 0px; padding: 0px; border: 0px; font-style: inherit; font-family: inherit; vertical-align: baseline; color: #666600;">=</span><span class="kwd" style="margin: 0px; padding: 0px; border: 0px; font-style: inherit; font-family: inherit; vertical-align: baseline; color: #000088;">True</span><span class="pun" style="margin: 0px; padding: 0px; border: 0px; font-style: inherit; font-family: inherit; vertical-align: baseline; color: #666600;">,</span><span class="pln" style="margin: 0px; padding: 0px; border: 0px; font-style: inherit; font-family: inherit; vertical-align: baseline; color: #000000;">
                           choices</span><span class="pun" style="margin: 0px; padding: 0px; border: 0px; font-style: inherit; font-family: inherit; vertical-align: baseline; color: #666600;">=</span><span class="kwd" style="margin: 0px; padding: 0px; border: 0px; font-style: inherit; font-family: inherit; vertical-align: baseline; color: #000088;">set</span><span class="pun" style="margin: 0px; padding: 0px; border: 0px; font-style: inherit; font-family: inherit; vertical-align: baseline; color: #666600;">([</span><span class="str" style="margin: 0px; padding: 0px; border: 0px; font-style: inherit; font-family: inherit; vertical-align: baseline; color: #008800;">"executive"</span><span class="pun" style="margin: 0px; padding: 0px; border: 0px; font-style: inherit; font-family: inherit; vertical-align: baseline; color: #666600;">,</span> <span class="str" style="margin: 0px; padding: 0px; border: 0px; font-style: inherit; font-family: inherit; vertical-align: baseline; color: #008800;">"manager"</span><span class="pun" style="margin: 0px; padding: 0px; border: 0px; font-style: inherit; font-family: inherit; vertical-align: baseline; color: #666600;">,</span> <span class="str" style="margin: 0px; padding: 0px; border: 0px; font-style: inherit; font-family: inherit; vertical-align: baseline; color: #008800;">"producer"</span><span class="pun" style="margin: 0px; padding: 0px; border: 0px; font-style: inherit; font-family: inherit; vertical-align: baseline; color: #666600;">]))</span><span class="pln" style="margin: 0px; padding: 0px; border: 0px; font-style: inherit; font-family: inherit; vertical-align: baseline; color: #000000;">
  hire_date </span><span class="pun" style="margin: 0px; padding: 0px; border: 0px; font-style: inherit; font-family: inherit; vertical-align: baseline; color: #666600;">=</span><span class="pln" style="margin: 0px; padding: 0px; border: 0px; font-style: inherit; font-family: inherit; vertical-align: baseline; color: #000000;"> db</span><span class="pun" style="margin: 0px; padding: 0px; border: 0px; font-style: inherit; font-family: inherit; vertical-align: baseline; color: #666600;">.</span><span class="typ" style="margin: 0px; padding: 0px; border: 0px; font-style: inherit; font-family: inherit; vertical-align: baseline; color: #660066;">DateProperty</span><span class="pun" style="margin: 0px; padding: 0px; border: 0px; font-style: inherit; font-family: inherit; vertical-align: baseline; color: #666600;">()</span><span class="pln" style="margin: 0px; padding: 0px; border: 0px; font-style: inherit; font-family: inherit; vertical-align: baseline; color: #000000;">
  new_hire_training_completed </span><span class="pun" style="margin: 0px; padding: 0px; border: 0px; font-style: inherit; font-family: inherit; vertical-align: baseline; color: #666600;">=</span><span class="pln" style="margin: 0px; padding: 0px; border: 0px; font-style: inherit; font-family: inherit; vertical-align: baseline; color: #000000;"> db</span><span class="pun" style="margin: 0px; padding: 0px; border: 0px; font-style: inherit; font-family: inherit; vertical-align: baseline; color: #666600;">.</span><span class="typ" style="margin: 0px; padding: 0px; border: 0px; font-style: inherit; font-family: inherit; vertical-align: baseline; color: #660066;">BooleanProperty</span><span class="pun" style="margin: 0px; padding: 0px; border: 0px; font-style: inherit; font-family: inherit; vertical-align: baseline; color: #666600;">(</span><span class="pln" style="margin: 0px; padding: 0px; border: 0px; font-style: inherit; font-family: inherit; vertical-align: baseline; color: #000000;">indexed</span><span class="pun" style="margin: 0px; padding: 0px; border: 0px; font-style: inherit; font-family: inherit; vertical-align: baseline; color: #666600;">=</span><span class="kwd" style="margin: 0px; padding: 0px; border: 0px; font-style: inherit; font-family: inherit; vertical-align: baseline; color: #000088;">False</span><span class="pun" style="margin: 0px; padding: 0px; border: 0px; font-style: inherit; font-family: inherit; vertical-align: baseline; color: #666600;">)</span><span class="pln" style="margin: 0px; padding: 0px; border: 0px; font-style: inherit; font-family: inherit; vertical-align: baseline; color: #000000;">
  email </span><span class="pun" style="margin: 0px; padding: 0px; border: 0px; font-style: inherit; font-family: inherit; vertical-align: baseline; color: #666600;">=</span><span class="pln" style="margin: 0px; padding: 0px; border: 0px; font-style: inherit; font-family: inherit; vertical-align: baseline; color: #000000;"> db</span><span class="pun" style="margin: 0px; padding: 0px; border: 0px; font-style: inherit; font-family: inherit; vertical-align: baseline; color: #666600;">.</span><span class="typ" style="margin: 0px; padding: 0px; border: 0px; font-style: inherit; font-family: inherit; vertical-align: baseline; color: #660066;">StringProperty</span><span class="pun" style="margin: 0px; padding: 0px; border: 0px; font-style: inherit; font-family: inherit; vertical-align: baseline; color: #666600;">()</span><span class="pln" style="margin: 0px; padding: 0px; border: 0px; font-style: inherit; font-family: inherit; vertical-align: baseline; color: #000000;">
e </span><span class="pun" style="margin: 0px; padding: 0px; border: 0px; font-style: inherit; font-family: inherit; vertical-align: baseline; color: #666600;">=</span> <span class="typ" style="margin: 0px; padding: 0px; border: 0px; font-style: inherit; font-family: inherit; vertical-align: baseline; color: #660066;">Employee</span><span class="pun" style="margin: 0px; padding: 0px; border: 0px; font-style: inherit; font-family: inherit; vertical-align: baseline; color: #666600;">(</span><span class="pln" style="margin: 0px; padding: 0px; border: 0px; font-style: inherit; font-family: inherit; vertical-align: baseline; color: #000000;">name</span><span class="pun" style="margin: 0px; padding: 0px; border: 0px; font-style: inherit; font-family: inherit; vertical-align: baseline; color: #666600;">=</span><span class="str" style="margin: 0px; padding: 0px; border: 0px; font-style: inherit; font-family: inherit; vertical-align: baseline; color: #008800;">"John"</span><span class="pun" style="margin: 0px; padding: 0px; border: 0px; font-style: inherit; font-family: inherit; vertical-align: baseline; color: #666600;">,</span><span class="pln" style="margin: 0px; padding: 0px; border: 0px; font-style: inherit; font-family: inherit; vertical-align: baseline; color: #000000;">
             role</span><span class="pun" style="margin: 0px; padding: 0px; border: 0px; font-style: inherit; font-family: inherit; vertical-align: baseline; color: #666600;">=</span><span class="str" style="margin: 0px; padding: 0px; border: 0px; font-style: inherit; font-family: inherit; vertical-align: baseline; color: #008800;">"manager"</span><span class="pun" style="margin: 0px; padding: 0px; border: 0px; font-style: inherit; font-family: inherit; vertical-align: baseline; color: #666600;">,</span><span class="pln" style="margin: 0px; padding: 0px; border: 0px; font-style: inherit; font-family: inherit; vertical-align: baseline; color: #000000;">
             email</span><span class="pun" style="margin: 0px; padding: 0px; border: 0px; font-style: inherit; font-family: inherit; vertical-align: baseline; color: #666600;">=</span><span class="pln" style="margin: 0px; padding: 0px; border: 0px; font-style: inherit; font-family: inherit; vertical-align: baseline; color: #000000;">users</span><span class="pun" style="margin: 0px; padding: 0px; border: 0px; font-style: inherit; font-family: inherit; vertical-align: baseline; color: #666600;">.</span><span class="pln" style="margin: 0px; padding: 0px; border: 0px; font-style: inherit; font-family: inherit; vertical-align: baseline; color: #000000;">get_current_user</span><span class="pun" style="margin: 0px; padding: 0px; border: 0px; font-style: inherit; font-family: inherit; vertical-align: baseline; color: #666600;">().</span><span class="pln" style="margin: 0px; padding: 0px; border: 0px; font-style: inherit; font-family: inherit; vertical-align: baseline; color: #000000;">email</span><span class="pun" style="margin: 0px; padding: 0px; border: 0px; font-style: inherit; font-family: inherit; vertical-align: baseline; color: #666600;">())</span><span class="pln" style="margin: 0px; padding: 0px; border: 0px; font-style: inherit; font-family: inherit; vertical-align: baseline; color: #000000;">
e</span><span class="pun" style="margin: 0px; padding: 0px; border: 0px; font-style: inherit; font-family: inherit; vertical-align: baseline; color: #666600;">.</span><span class="pln" style="margin: 0px; padding: 0px; border: 0px; font-style: inherit; font-family: inherit; vertical-align: baseline; color: #000000;">hire_date </span><span class="pun" style="margin: 0px; padding: 0px; border: 0px; font-style: inherit; font-family: inherit; vertical-align: baseline; color: #666600;">=</span><span class="pln" style="margin: 0px; padding: 0px; border: 0px; font-style: inherit; font-family: inherit; vertical-align: baseline; color: #000000;"> datetime</span><span class="pun" style="margin: 0px; padding: 0px; border: 0px; font-style: inherit; font-family: inherit; vertical-align: baseline; color: #666600;">.</span><span class="pln" style="margin: 0px; padding: 0px; border: 0px; font-style: inherit; font-family: inherit; vertical-align: baseline; color: #000000;">datetime</span><span class="pun" style="margin: 0px; padding: 0px; border: 0px; font-style: inherit; font-family: inherit; vertical-align: baseline; color: #666600;">.</span><span class="pln" style="margin: 0px; padding: 0px; border: 0px; font-style: inherit; font-family: inherit; vertical-align: baseline; color: #000000;">now</span><span class="pun" style="margin: 0px; padding: 0px; border: 0px; font-style: inherit; font-family: inherit; vertical-align: baseline; color: #666600;">().</span><span class="pln" style="margin: 0px; padding: 0px; border: 0px; font-style: inherit; font-family: inherit; vertical-align: baseline; color: #000000;">date</span><span class="pun" style="margin: 0px; padding: 0px; border: 0px; font-style: inherit; font-family: inherit; vertical-align: baseline; color: #666600;">()</span>
</pre>
<p><span style="color: #2d2c2d; font-family: gulim;"> Datastore는 스키마가 없는 데이터베이스라고 했지만 스키마처럼 역활을 하는 클래스가 필요합니다. 클래스 안에서 각 필드에 대한 자료형을 정의 합니다. 그리고 객체를 생성한 후 데이터를 변경을 하고 put()이라는 함수를 이용하여 추가및 수정을 할 수 있습니다.</span></p>
<p style="background-color: transparent;"><span style="color: #2d2c2d; font-family: gulim;"> 수정 같은 경우에는 각 객체마다 키가 존재하는데 그 키로 검색하거나 해서 한 객체를 얻은후 수정 후 put()함수를 쓰면 수정이 됩니다.</span></p>
<p style="background-color: transparent;"><span style="color: #2d2c2d; font-family: gulim;">NoSQL같은 경우 sql처럼 join이 없기 때문에 설계를 잘 하셔야 됩니다.</span></p>
<p style="background-color: transparent;"><b style="color: #2d2c2d; font-family: gulim; background-color: #ffffff;"><span style="font-size: 11pt;"><span style="font-size: 14pt;">4. Users API</span></span></b></p>
<p><span style="color: #2d2c2d; font-family: gulim;"> Django같은 경우 Session을 Database를 이용해서 Session처리를 하는 프레임워크입니다. 하지만 Django를 Google App Engine과 같이 쓰면서 기존의 Django의 데이터베이스를 쓰는 방법을 쓰지 않고 Datastore를 이용해서 데이터베이스를 쓰기 때문에 Session를 사용할 수 없습니다.</span><span style="color: #e31600;"><span style="font-family: gulim;"> </span><span style="font-family: gulim;">(Datastore 대신Google Cloud SQL를 쓰면 Session이 사용가능합니다.)</span></span></p>
<p><span style="color: #2d2c2d; font-family: gulim;"> 하지만 걱정할 필요가 없습니다. Users Api를 제공하고 있습니다. google계정으로 로그인이 가능하며 세션유지도 됩니다. </span></p>
<pre class="prettyprint" style="margin-top: 1.5em; margin-bottom: 1.5em; padding: 6px 10px; border: 1px solid #bbbbbb; font-size: 13px; font-family: 'Droid Sans Mono', monospace; vertical-align: baseline; line-height: 1.5; background-color: #fafafa; overflow: auto;"><span class="kwd" style="color: #000088; margin: 0px; padding: 0px; border: 0px; font-style: inherit; font-family: inherit; vertical-align: baseline;">from</span><span class="pln" style="color: #000000; margin: 0px; padding: 0px; border: 0px; font-style: inherit; font-family: inherit; vertical-align: baseline;"> google</span><span class="pun" style="color: #666600; margin: 0px; padding: 0px; border: 0px; font-style: inherit; font-family: inherit; vertical-align: baseline;">.</span><span class="pln" style="color: #000000; margin: 0px; padding: 0px; border: 0px; font-style: inherit; font-family: inherit; vertical-align: baseline;">appengine</span><span class="pun" style="color: #666600; margin: 0px; padding: 0px; border: 0px; font-style: inherit; font-family: inherit; vertical-align: baseline;">.</span><span class="pln" style="color: #000000; margin: 0px; padding: 0px; border: 0px; font-style: inherit; font-family: inherit; vertical-align: baseline;">api </span><span class="kwd" style="color: #000088; margin: 0px; padding: 0px; border: 0px; font-style: inherit; font-family: inherit; vertical-align: baseline;">import</span><span class="pln" style="color: #000000; margin: 0px; padding: 0px; border: 0px; font-style: inherit; font-family: inherit; vertical-align: baseline;"> users</span>

<span class="kwd" style="color: #000088; margin: 0px; padding: 0px; border: 0px; font-style: inherit; font-family: inherit; vertical-align: baseline;">def</span> <span style="color: #660066; font-family: inherit; font-style: inherit; line-height: 1.5;">loginView</span><span class="pun" style="font-family: inherit; line-height: 1.5; color: #666600; margin: 0px; padding: 0px; border: 0px; font-style: inherit; vertical-align: baseline;">(</span><span style="font-family: inherit; line-height: 1.5; color: #000000; font-style: inherit;">request</span><span style="font-family: inherit; line-height: 1.5; color: #666600; font-style: inherit;">):</span>
<span class="pln" style="color: #000000; margin: 0px; padding: 0px; border: 0px; font-style: inherit; font-family: inherit; vertical-align: baseline;">   user </span><span class="pun" style="color: #666600; margin: 0px; padding: 0px; border: 0px; font-style: inherit; font-family: inherit; vertical-align: baseline;">=</span><span class="pln" style="color: #000000; margin: 0px; padding: 0px; border: 0px; font-style: inherit; font-family: inherit; vertical-align: baseline;"> users</span><span class="pun" style="color: #666600; margin: 0px; padding: 0px; border: 0px; font-style: inherit; font-family: inherit; vertical-align: baseline;">.</span><span class="pln" style="color: #000000; margin: 0px; padding: 0px; border: 0px; font-style: inherit; font-family: inherit; vertical-align: baseline;">get_current_user</span><span class="pun" style="color: #666600; margin: 0px; padding: 0px; border: 0px; font-style: inherit; font-family: inherit; vertical-align: baseline;">()</span><span class="pln" style="color: #000000; margin: 0px; padding: 0px; border: 0px; font-style: inherit; font-family: inherit; vertical-align: baseline;">
   </span><span class="kwd" style="color: #000088; margin: 0px; padding: 0px; border: 0px; font-style: inherit; font-family: inherit; vertical-align: baseline;">if</span><span class="pln" style="color: #000000; margin: 0px; padding: 0px; border: 0px; font-style: inherit; font-family: inherit; vertical-align: baseline;"> user</span><span class="pun" style="color: #666600; margin: 0px; padding: 0px; border: 0px; font-style: inherit; font-family: inherit; vertical-align: baseline;">:</span><span class="pln" style="color: #000000; margin: 0px; padding: 0px; border: 0px; font-style: inherit; font-family: inherit; vertical-align: baseline;">
      greeting </span><span class="pun" style="color: #666600; margin: 0px; padding: 0px; border: 0px; font-style: inherit; font-family: inherit; vertical-align: baseline;">=</span> <span class="pun" style="color: #666600; margin: 0px; padding: 0px; border: 0px; font-style: inherit; font-family: inherit; vertical-align: baseline;">(</span><span class="str" style="color: #008800; margin: 0px; padding: 0px; border: 0px; font-style: inherit; font-family: inherit; vertical-align: baseline;">"Welcome, %s! (&lt;a href=\"%s\"&gt;sign out&lt;/a&gt;)"</span> <span class="pun" style="color: #666600; margin: 0px; padding: 0px; border: 0px; font-style: inherit; font-family: inherit; vertical-align: baseline;">%</span><span class="pln" style="color: #000000; margin: 0px; padding: 0px; border: 0px; font-style: inherit; font-family: inherit; vertical-align: baseline;">
                   </span><span class="pun" style="color: #666600; margin: 0px; padding: 0px; border: 0px; font-style: inherit; font-family: inherit; vertical-align: baseline;">(</span><span class="pln" style="color: #000000; margin: 0px; padding: 0px; border: 0px; font-style: inherit; font-family: inherit; vertical-align: baseline;">user</span><span class="pun" style="color: #666600; margin: 0px; padding: 0px; border: 0px; font-style: inherit; font-family: inherit; vertical-align: baseline;">.</span><span class="pln" style="color: #000000; margin: 0px; padding: 0px; border: 0px; font-style: inherit; font-family: inherit; vertical-align: baseline;">nickname</span><span class="pun" style="color: #666600; margin: 0px; padding: 0px; border: 0px; font-style: inherit; font-family: inherit; vertical-align: baseline;">(),</span><span class="pln" style="color: #000000; margin: 0px; padding: 0px; border: 0px; font-style: inherit; font-family: inherit; vertical-align: baseline;"> users</span><span class="pun" style="color: #666600; margin: 0px; padding: 0px; border: 0px; font-style: inherit; font-family: inherit; vertical-align: baseline;">.</span><span class="pln" style="color: #000000; margin: 0px; padding: 0px; border: 0px; font-style: inherit; font-family: inherit; vertical-align: baseline;">create_logout_url</span><span class="pun" style="color: #666600; margin: 0px; padding: 0px; border: 0px; font-style: inherit; font-family: inherit; vertical-align: baseline;">(</span><span class="str" style="color: #008800; margin: 0px; padding: 0px; border: 0px; font-style: inherit; font-family: inherit; vertical-align: baseline;">"/"</span><span class="pun" style="color: #666600; margin: 0px; padding: 0px; border: 0px; font-style: inherit; font-family: inherit; vertical-align: baseline;">)))</span><span class="pln" style="color: #000000; margin: 0px; padding: 0px; border: 0px; font-style: inherit; font-family: inherit; vertical-align: baseline;">
   </span><span class="kwd" style="color: #000088; margin: 0px; padding: 0px; border: 0px; font-style: inherit; font-family: inherit; vertical-align: baseline;">else</span><span class="pun" style="color: #666600; margin: 0px; padding: 0px; border: 0px; font-style: inherit; font-family: inherit; vertical-align: baseline;">:</span><span class="pln" style="color: #000000; margin: 0px; padding: 0px; border: 0px; font-style: inherit; font-family: inherit; vertical-align: baseline;">
      greeting </span><span class="pun" style="color: #666600; margin: 0px; padding: 0px; border: 0px; font-style: inherit; font-family: inherit; vertical-align: baseline;">=</span> <span class="pun" style="color: #666600; margin: 0px; padding: 0px; border: 0px; font-style: inherit; font-family: inherit; vertical-align: baseline;">(</span><span class="str" style="color: #008800; margin: 0px; padding: 0px; border: 0px; font-style: inherit; font-family: inherit; vertical-align: baseline;">"&lt;a href=\"%s\"&gt;Sign in or register&lt;/a&gt;."</span> <span class="pun" style="color: #666600; margin: 0px; padding: 0px; border: 0px; font-style: inherit; font-family: inherit; vertical-align: baseline;">%</span><span class="pln" style="color: #000000; margin: 0px; padding: 0px; border: 0px; font-style: inherit; font-family: inherit; vertical-align: baseline;">
                  users</span><span class="pun" style="color: #666600; margin: 0px; padding: 0px; border: 0px; font-style: inherit; font-family: inherit; vertical-align: baseline;">.</span><span class="pln" style="color: #000000; margin: 0px; padding: 0px; border: 0px; font-style: inherit; font-family: inherit; vertical-align: baseline;">create_login_url</span><span class="pun" style="color: #666600; margin: 0px; padding: 0px; border: 0px; font-style: inherit; font-family: inherit; vertical-align: baseline;">(</span><span class="str" style="color: #008800; margin: 0px; padding: 0px; border: 0px; font-style: inherit; font-family: inherit; vertical-align: baseline;">"/"</span><span class="pun" style="color: #666600; margin: 0px; padding: 0px; border: 0px; font-style: inherit; font-family: inherit; vertical-align: baseline;">))</span><span class="pln" style="color: #000000; margin: 0px; padding: 0px; border: 0px; font-style: inherit; font-family: inherit; vertical-align: baseline;">
   return HttpResponse(greeting)
</span></pre>
<p>위의 코드를 실행 시켜보면 다음과 같이 화면이 나옵니다.</p>
<p><img class="aligncenter" src="{{ site.baseurl }}/assets/cfile7.uf.012E843E507BF3B5325F44.png" alt="" width="362" height="189" /></p>
<p>버튼을 눌러보면 구글계정으로 로그인하게 되어있습니다.<br />
<img class="aligncenter" src="{{ site.baseurl }}/assets/cfile29.uf.112E843E507BF3B6347298.png" alt="" width="750" height="367" />가입을 하고 나서 로그인을 하게 되면 다음과 같이 나옵니다.</p>
<p><img class="aligncenter" src="{{ site.baseurl }}/assets/cfile8.uf.011D8341507BF5ED3A4096.png" alt="" width="362" height="181" /></p>
<p>users 객체에 email이나 nickname, user_id 몇가지 정보를 가지고 있습니다. 이 정보로는 회원관리가 힘들시다면 user_id를 저장하고 기타정보를 담고 있는 것을 Datastore를 이용하여 만들어 관리 할 수 있습니다.</p>
<p>요즘 개인정보보호때문에 개인정보를 Database에 가지고 있는게 부담스러운 현실인데 이런 방법이면 별로 신경안써도 되겠죠?</p>
<p>&nbsp;</p>
<p><b style="color: #2d2c2d; font-family: gulim; background-color: #ffffff;"><span style="font-size: 11pt;"><span style="font-size: 14pt;">5. Mail API</span></span></b></p>
<p style="background-color: transparent;"><span style="color: #2d2c2d; font-family: gulim;"> 보통 웹서비스를 할때 메일을 사용할려면 STMP서버를 구성하거나 메일호스팅서비스를 받거나 해야 됩니다. 하지만 Google App Engine에서는 따로 구축하거나 할 필요가 없습니다.</span></p>
<pre class="prettyprint" style="margin-top: 1.5em; margin-bottom: 1.5em; padding: 6px 10px; border: 1px solid #bbbbbb; font-size: 13px; font-family: 'Droid Sans Mono', monospace; vertical-align: baseline; line-height: 1.5; background-color: #fafafa; overflow: auto;"><span class="kwd" style="color: #000088; margin: 0px; padding: 0px; border: 0px; font-style: inherit; font-family: inherit; vertical-align: baseline;">from</span><span class="pln" style="color: #000000; margin: 0px; padding: 0px; border: 0px; font-style: inherit; font-family: inherit; vertical-align: baseline;"> google</span><span class="pun" style="color: #666600; margin: 0px; padding: 0px; border: 0px; font-style: inherit; font-family: inherit; vertical-align: baseline;">.</span><span class="pln" style="color: #000000; margin: 0px; padding: 0px; border: 0px; font-style: inherit; font-family: inherit; vertical-align: baseline;">appengine<span class="pun" style="font-family: inherit; line-height: 1.5; color: #666600; margin: 0px; padding: 0px; border: 0px; font-style: inherit; vertical-align: baseline;">.</span><span class="pln" style="font-family: inherit; line-height: 1.5; margin: 0px; padding: 0px; border: 0px; font-style: inherit; vertical-align: baseline;">api </span><span class="kwd" style="font-family: inherit; line-height: 1.5; color: #000088; margin: 0px; padding: 0px; border: 0px; font-style: inherit; vertical-align: baseline;">import</span><span class="pln" style="font-family: inherit; line-height: 1.5; margin: 0px; padding: 0px; border: 0px; font-style: inherit; vertical-align: baseline;"> mail</span>
</span><span class="kwd" style="color: #000088; margin: 0px; padding: 0px; border: 0px; font-style: inherit; font-family: inherit; vertical-align: baseline;">from</span><span class="pln" style="color: #000000; margin: 0px; padding: 0px; border: 0px; font-style: inherit; font-family: inherit; vertical-align: baseline;"> django.http</span> <span class="kwd" style="color: #000088; margin: 0px; padding: 0px; border: 0px; font-style: inherit; font-family: inherit; vertical-align: baseline;">import</span><span class="pln" style="color: #000000; margin: 0px; padding: 0px; border: 0px; font-style: inherit; font-family: inherit; vertical-align: baseline;"> HttpResponse
                                                                                    
</span><span class="pln" style="margin: 0px; padding: 0px; border: 0px; font-style: inherit; font-family: inherit; vertical-align: baseline;"><span style="color: #000088;">def</span></span> <span class="pln" style="margin: 0px; padding: 0px; border: 0px; font-style: inherit; font-family: inherit; vertical-align: baseline;"><span style="color: #660066;">sendMail</span></span><span class="pun" style="color: #666600; margin: 0px; padding: 0px; border: 0px; font-style: inherit; font-family: inherit; vertical-align: baseline;">(</span><span class="pun" style="margin: 0px; padding: 0px; border: 0px; font-style: inherit; font-family: inherit; vertical-align: baseline;"><span style="color: #000000;">req</span></span><span class="pun" style="color: #666600; margin: 0px; padding: 0px; border: 0px; font-style: inherit; font-family: inherit; vertical-align: baseline;">):</span><span class="pln" style="color: #000000; margin: 0px; padding: 0px; border: 0px; font-style: inherit; font-family: inherit; vertical-align: baseline;">
  message = mail.EmailMessage(sender=</span><span class="pln" style="margin: 0px; padding: 0px; border: 0px; font-style: inherit; font-family: inherit; vertical-align: baseline;"><span style="color: #2b8400;">"kpdc.org Support &lt;rucifer1217@gmail.com&gt;"</span></span><span class="pln" style="color: #000000; margin: 0px; padding: 0px; border: 0px; font-style: inherit; font-family: inherit; vertical-align: baseline;">,</span><span class="pln" style="color: #000000; margin: 0px; padding: 0px; border: 0px; font-style: inherit; font-family: inherit; vertical-align: baseline;">
            </span><span class="pln" style="margin: 0px; padding: 0px; border: 0px; font-style: inherit; font-family: inherit; vertical-align: baseline;"><span style="color: #666600;">                  subject=</span><span style="color: #2b8400;">"가입을 축하드립니다."</span><span style="color: #666600;">)</span></span><span class="pln" style="color: #000000; margin: 0px; padding: 0px; border: 0px; font-style: inherit; font-family: inherit; vertical-align: baseline;">
            </span><span class="pln" style="color: #000000; margin: 0px; padding: 0px; border: 0px; font-style: inherit; font-family: inherit; vertical-align: baseline;">
  message.to </span><span class="pun" style="color: #666600; margin: 0px; padding: 0px; border: 0px; font-style: inherit; font-family: inherit; vertical-align: baseline;">=</span><span class="pln" style="color: #000000; margin: 0px; padding: 0px; border: 0px; font-style: inherit; font-family: inherit; vertical-align: baseline;"> <span style="color: #008800; font-family: inherit; font-style: inherit; line-height: 1.5;">"rucifer &lt;rucifer1217@gmail.com&gt;"</span>
</span><span class="pln" style="color: #000000; margin: 0px; padding: 0px; border: 0px; font-style: inherit; font-family: inherit; vertical-align: baseline;">  message.body= </span><span class="pln" style="margin: 0px; padding: 0px; border: 0px; font-style: inherit; font-family: inherit; vertical-align: baseline;"><span style="color: #2b8400;">"""  
  kpdc.org 가입을 축하드립니다."""</span></span>
<span class="pln" style="color: #000000; margin: 0px; padding: 0px; border: 0px; font-style: inherit; font-family: inherit; vertical-align: baseline;">  message.send()
  html=</span><span class="pln" style="margin: 0px; padding: 0px; border: 0px; font-style: inherit; font-family: inherit; vertical-align: baseline;"><span style="color: #2b8400;">"&lt;html&gt;&lt;body&gt;successfully sent mail.&lt;/body&gt;&lt;/html&gt;"</span></span>
<span class="pln" style="color: #000000; margin: 0px; padding: 0px; border: 0px; font-style: inherit; font-family: inherit; vertical-align: baseline;">  return HttpResponse(html)</span></pre>
<div><span class="pun" style="margin: 0px; padding: 0px; border: 0px; font-style: inherit; vertical-align: baseline;"><span class="pun" style="margin: 0px; padding: 0px; border: 0px; font-style: inherit; vertical-align: baseline;"><br />
</span></span></p>
<p style="font-family: inherit; color: #666600;"><span style="color: #2d2c2d; font-family: gulim;"> 코드는 따로 설명할 것이 없을 만큼 간단합니다. </span><span style="color: #000000; font-family: inherit; font-style: inherit; background-color: #fafafa; font-size: 13px; line-height: 1.5;">mail.EmailMessage으<span style="font-size: 9pt;">로 객체를 하나 생성하고 그 객체의 변수에 알맞은 값을 넣어 주면 됩니다.</span></span></p>
<p style="font-family: inherit; color: #666600;"><img class="aligncenter" src="{{ site.baseurl }}/assets/cfile7.uf.02781B48507D3EAD314455.png" alt="" width="750" height="328" /><span style="color: #2d2c2d; font-family: gulim;"> 하지만 따로 설정해야되는게 있다면 메일을 보내는 사람의 메일주소입니다. 이 메일은 Google App Engine의 Admninistration Consol의 Administration의 하위메뉴인 Permissions에서 위와 같이 보내는 사람의 주소가 등록이 되어야하며 Role은 Developer이상이 되어야 메일이 발송이 됩니다. 위의 코드를 실행시켜보면 </span></p>
<p style="font-family: inherit; color: #666600;"><span style="color: #2d2c2d; font-family: gulim;"><img class="aligncenter" src="{{ site.baseurl }}/assets/cfile9.uf.037B8638507D50DE30AF02.png" alt="" width="388" height="152" /></span></p>
<p><span style="color: #2d2c2d; font-family: gulim;">위와 같이 성공했다는 페이지가 나오며 </span></p>
<p style="font-family: inherit;"><span style="color: #666600;"><img class="aligncenter" src="{{ site.baseurl }}/assets/cfile29.uf.03781B48507D3EAD326D56.png" alt="" width="635" height="147" /></span><span style="color: #000000;"> 위와 같이 페이지가 나오며 아래와 같이 메일이 온 것을 확인 할 수 있습니다. 메일 발송을 통해서 회원가입 축하 메일이라든지 메일인증, 비밀번호찾기 등의 기능을 만들 수 있으며 주기적으로 웹사이트 상태를 로그로 관리자에게 보내는 등의 응용 할 수 있는 부분이 많이 있을 것 같습니다.</span></p>
</div>
<p style="background-color: transparent;"><span style="color: #2d2c2d; font-family: gulim;">참고사이트 : https://docs.djangoproject.com, https://developers.google.com/appengine</span></p>
